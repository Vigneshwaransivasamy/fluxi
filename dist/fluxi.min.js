!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.fluxi={})}(this,function(t){"use strict";function e(t){var e=[],n=t.length;let r=0;for(;n>r;)e.push(t[r]),r++;return e}function n(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function r(t,e){return function(){return new Promise((n,r)=>(t.apply(this,arguments).then(function(t){n(e.call(this,t))}).catch(r),e))}}function o(){var t;s(arguments[0])?(t=arguments[0],Array.prototype.shift.call(arguments)):t=!0;var e=arguments,o=0,i=arguments.length,c=arguments[0],u=t?n:r;if(1==i)return arguments[0];if(2==i)return u(e[0],e[1]);for(;i-1>o;)c=u(c,e[o+1]),o++;return c}function i(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-",r=0;t>r;r++)e+=n.charAt(Math.floor(64*Math.random()));return e}function c(t,e){for(var n in t)b(t[n])&&(t[n]=a(t[n],e));return t}function u(t,e){return e.has(t)?e.delete(t):Error("Type Error: subscriber should be of type Function")}function l(t,e){return t.subscribe=function(t){if(f(Function)(t)){var n=d();return e.set(n,t),u.bind(this,n,e)}return Error("Type Error: subscriber should be of type Function")},t}function a(t,e){function n(t){o.forEach(function(e){e(t)})}var r=!e,o=e||new Map,i={get:function(t,e){return t[e]},set:function(t,e,r){var i=null,c=null,u={};if(t[e]){if(i="UPDATE",(c=t[e])==r)return;t[e]=r}else i="NEW",t[e]=y(r)?r:a(r,o);return u={action:i,actionRoot:t,key:e,value:r},"update"==i&&(u.oldValue=c),n(u),t[e]}};return t=new Proxy(c(t,o),i),r?l(t,o):t}const f=t=>e=>Object(e)instanceof t,s=t=>f(Boolean)(t);var p=Object.prototype.toString;const b=t=>"[object Object]"===p.call(t),y=t=>f(String)(t);var d=()=>i(32);var h=Object.prototype.toString;var j=Object.prototype.toString;var v=Object.prototype.toString;var g=Object.prototype.toString;var m=Object.prototype.toString;var N=Object.prototype.toString;t.curry=function(t){return function(){return t.length==arguments.length?t(...arguments):t.bind(null,...arguments)}},t.debug=function(...t){var n=e(t);n.splice(0,0,window.performance?" : "+(window.performance.now()/1e3).toFixed(3)+": ":" : "+Date()+" : "),console.log(...n)},t.filler=function(){return"__EMPTY__"},t.pipe2=n,t.pipeN=o,t.syncPipe2=r,t.syncPipeN=function(){return Array.prototype.unshift.call(arguments,!1),o.apply(this,arguments)},t.proxr=a,t.is=f,t.isArray=(t=>f(Array)(t)),t.isBoolean=s,t.isDate=(t=>"[object Date]"===h.call(t)),t.isFunction=(t=>f(Function)(t)),t.isNaN=(t=>"[object NaN]"===j.call(t)),t.isNull=(t=>"[object Null]"===v.call(t)),t.isNumber=(t=>f(Number)(t)),t.isObject=b,t.isPromise=(t=>"[object Promise]"===g.call(t)),t.isRegex=(t=>f(RegExp)(t)),t.isString=y,t.isSymbol=(t=>"[object Symbol]"===m.call(t)),t.isUndefined=(t=>"[object Undefined]"===N.call(t)),Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmx1eGkubWluLmpzIiwic291cmNlcyI6WyIuLi9zb3VyY2UvZGVidWcuanMiLCIuLi9zb3VyY2UvcGlwZTIuanMiLCIuLi9zb3VyY2Uvc3luY1BpcGUyLmpzIiwiLi4vc291cmNlL3BpcGVOLmpzIiwiLi4vc291cmNlL3JhbmRvbVRva2VuLmpzIiwiLi4vc291cmNlL3Byb3hyLmpzIiwiLi4vc291cmNlL2lzLmpzIiwiLi4vc291cmNlL2lzQm9vbGVhbi5qcyIsIi4uL3NvdXJjZS9pc09iamVjdC5qcyIsIi4uL3NvdXJjZS9pc1N0cmluZy5qcyIsIi4uL3NvdXJjZS9pc0RhdGUuanMiLCIuLi9zb3VyY2UvaXNOYU4uanMiLCIuLi9zb3VyY2UvaXNOdWxsLmpzIiwiLi4vc291cmNlL2lzUHJvbWlzZS5qcyIsIi4uL3NvdXJjZS9pc1N5bWJvbC5qcyIsIi4uL3NvdXJjZS9pc1VuZGVmaW5lZC5qcyIsIi4uL3NvdXJjZS9jdXJyeS5qcyIsIi4uL3NvdXJjZS9maWxsZXIuanMiLCIuLi9zb3VyY2Uvc3luY1BpcGVOLmpzIiwiLi4vc291cmNlL2lzQXJyYXkuanMiLCIuLi9zb3VyY2UvaXNGdW5jdGlvbi5qcyIsIi4uL3NvdXJjZS9pc051bWJlci5qcyIsIi4uL3NvdXJjZS9pc1JlZ2V4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGJ1aWxkTG9ncyhyZXN0KXtcbiAgdmFyIGxvZyA9IFtdO1xuICB2YXIgcmVzdExlbmd0aCA9IHJlc3QubGVuZ3RoXG4gIGxldCBpID0gMDtcbiAgZm9yICggO2kgPCByZXN0TGVuZ3RoOykge1xuICAgIGxvZy5wdXNoKCByZXN0W2ldICk7XG4gICAgaSsrO1xuICB9XG4gIHJldHVybiBsb2c7XG59XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZWJ1ZyguLi5yZXN0KSB7XG4gIHZhciBsb2dzID0gYnVpbGRMb2dzKHJlc3QpO1xuICBsb2dzLnNwbGljZShcbiAgICAwLDAsXG4gICAgd2luZG93LnBlcmZvcm1hbmNlID8gJyA6ICcgKyAod2luZG93LnBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMCkudG9GaXhlZCgzKSArICc6ICcgXG4gICAgOiAnIDogJyArIERhdGUoKSArICcgOiAnXG4gICk7XG4gIGNvbnNvbGUubG9nKC4uLmxvZ3MpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBpcGUyKGZuMSwgZm4yKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGZuMi5jYWxsKHRoaXMsIGZuMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgfTtcbn0iLCIvKipcbiAqIFxuICogVXNhZ2U6IFN5bmNocm9ub3VzIHBpcGUgd2lsbCB3b3JrcyBleGFjbHkgYXMgeW91IHRoaW5rXG4gKiAgICAgICAgICB0aGF0IHRoaXMgd2lsbCB3YWl0IGZvciBlYWNoIGFjdGlvbiB0byBnZXQgY29tcGxldGVkXG4gKiBcbiAqIHZhciBqb2luQWN0aW9ucyA9IHN5bmNQaXBlMih0aW1lcjEsdGltZXIyLHRpbWVyMyk7XG4gKiBcbiAqIGpvaW5BY3Rpb25zKCkgLy8gICAgIC0+IHlvdSBjYW4gZWl0aGVyIGp1c3QgaW5pdGF0ZSB0aGUgYWN0aW9uXG4gKiBcbiAqIGpvaW5BY3Rpb25zKCkudGhlbiggIC8vIC0+IEFkZCBhIGxpc3RlbmVyIHRvIGdldCB0aGUgY29tcGxldGVkIHN0YXR1c1xuICogICAgICBmdW5jdGlvbigpe1xuICogICAgICBjb25zb2xlLmxvZyhcIkNvbXBsZXRlZCFcIilcbiAqIH0pO1xuICogXG4gKiBAcGFyYW0geypGdW5jdGlvbn0gZm4xIFxuICogQHBhcmFtIHsqRnVuY3Rpb259IGZuMiBcbiAqIFxuICogQHJldHVybiBQcm9taXNlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3luY1BpcGUyKGZuMSwgZm4yKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGZuMS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmbjIuY2FsbCh0aGlzLCBkYXRhKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKS5jYXRjaChyZWplY3QpO1xuICAgICAgICAgICAgcmV0dXJuIGZuMjtcbiAgICAgICAgfSk7XG4gICAgfTtcbn0iLCIvKipcbiAqIFxuICogVXNhZ2U6IEFzeWNocm9ub3VzIHBpcGUgd2hpY2gganVzdCBiaWxkcyBtdWx0aXBsZVxuICogICAgICAgICAgRnVuY3Rpb25zIHRvIG9uZSBhbmQgd2FpdCBmb3IgY29tbWFuZFxuICogXG4gKiB2YXIgam9pbkFjdGlvbnMgPSBwaXBlTihhZGRPbmUsIGFkZFR3bywgYWRkVGhyZWUpO1xuICogam9pbkFjdGlvbnMoKTtcbiAqIFxuICogQHBhcmFtIHsqRnVuY3Rpb259IGZuMSBcbiAqIEBwYXJhbSB7KkZ1bmN0aW9ufSBmbjIgXG4gKiBcbiAqIEByZXR1cm4gUHJvbWlzZVxuICovXG5cblxuaW1wb3J0IHBpcGUyIGZyb20gJy4vcGlwZTInO1xuaW1wb3J0IGlzQm9vbGVhbiBmcm9tICcuL2lzQm9vbGVhbic7XG5pbXBvcnQgc3luY1BpcGUyIGZyb20gJy4vc3luY1BpcGUyJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGlwZU4oKSB7XG4gICAgdmFyIGlzQXN5bmM7XG4gICAgaWYgKGlzQm9vbGVhbihhcmd1bWVudHNbMF0pKSB7XG4gICAgICAgIGlzQXN5bmMgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5zaGlmdC5jYWxsKGFyZ3VtZW50cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaXNBc3luYyA9IHRydWU7XG4gICAgfVxuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBpID0gMDtcbiAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICB2YXIgbGFzdFJlc3VsdCA9IGFyZ3VtZW50c1swXTtcbiAgICB2YXIgX3BpcGUyID0gaXNBc3luYyA/IHBpcGUyIDogc3luY1BpcGUyO1xuICAgIGlmIChsZW5ndGggPT0gMSlcbiAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1swXTtcbiAgICBpZiAobGVuZ3RoID09IDIpXG4gICAgICAgIHJldHVybiAoX3BpcGUyKGFyZ3NbMF0sIGFyZ3NbMV0pKTtcbiAgICBmb3IgKDsgaSA8IGxlbmd0aCAtIDE7KSB7XG4gICAgICAgIGxhc3RSZXN1bHQgPSBfcGlwZTIobGFzdFJlc3VsdCwgYXJnc1tpICsgMV0pO1xuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhc3RSZXN1bHQ7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmFuZG9tVG9rZW4obGVuZ3RoKSB7XG4gICAgdmFyIGhhc2ggPSAnJztcbiAgICB2YXIgbGFuZ3VhZ2UgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODlfLSc7XG5cbiAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBsZW5ndGg7IG9mZnNldCsrKVxuICAgICAgICBoYXNoICs9IGxhbmd1YWdlLmNoYXJBdChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsYW5ndWFnZS5sZW5ndGgpKTtcblxuICAgIHJldHVybiBoYXNoO1xufSIsImltcG9ydCBpcyBmcm9tICcuL2lzJztcbmltcG9ydCByYW5kb21Ub2tlbiBmcm9tICcuL3JhbmRvbVRva2VuJztcbmltcG9ydCBpc09iamVjdCBmcm9tICcuL2lzT2JqZWN0JztcbmltcG9ydCBpc1N0cmluZyBmcm9tICcuL2lzU3RyaW5nJztcblxudmFyIGhhc2gzMiA9ICgpID0+IHJhbmRvbVRva2VuKDMyKTtcblxuZnVuY3Rpb24gX3Byb3h5T2JqZWN0UHJvcGVydHkoZGF0YSwgc3Vic2NyaWJlcnMpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICBpZihpc09iamVjdChkYXRhW2tleV0pKSB7XG4gICAgICAgICAgICBkYXRhW2tleV0gPSBwcm94cihkYXRhW2tleV0sIHN1YnNjcmliZXJzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbn1cblxuZnVuY3Rpb24gdW5zdWJzY3JpYmUoaWQsIHN1YnNjcmliZXJzKSB7XG4gICAgaWYgKHN1YnNjcmliZXJzLmhhcyhpZCkpIHtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXJzLmRlbGV0ZShpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignVHlwZSBFcnJvcjogc3Vic2NyaWJlciBzaG91bGQgYmUgb2YgdHlwZSBGdW5jdGlvbicpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX19wdWJzdWJfXyhkYXRhLCBzdWJzY3JpYmVycykge1xuICAgIGRhdGEuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIGlmIChpcyhGdW5jdGlvbikoZm4pKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSBoYXNoMzIoKTtcbiAgICAgICAgICAgIHN1YnNjcmliZXJzLnNldChpZCwgZm4pO1xuICAgICAgICAgICAgcmV0dXJuIHVuc3Vic2NyaWJlLmJpbmQodGhpcywgaWQsIHN1YnNjcmliZXJzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ1R5cGUgRXJyb3I6IHN1YnNjcmliZXIgc2hvdWxkIGJlIG9mIHR5cGUgRnVuY3Rpb24nKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIGRhdGE7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHByb3hyKGRhdGEsIF9zdWJzY3JpYmVycykge1xuICAgIHZhciBpc1Jvb3QgPSAhX3N1YnNjcmliZXJzO1xuICAgIHZhciBzdWJzY3JpYmVycyA9IF9zdWJzY3JpYmVycyA/IF9zdWJzY3JpYmVycyA6IG5ldyBNYXAoKTtcbiAgICB2YXIgX2hhbmRsZXIgPSB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KHRhcmdldCwga2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gdGFyZ2V0W2tleV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHRhcmdldCwga2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IG51bGwsIG9sZFZhbHVlID0gbnVsbCwgYWN0aW9uRGF0YSA9IHt9O1xuICAgICAgICAgICAgaWYgKCF0YXJnZXRba2V5XSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbiA9ICdORVcnO1xuICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gaXNTdHJpbmcodmFsdWUpID8gdmFsdWUgOiBwcm94cih2YWx1ZSwgc3Vic2NyaWJlcnMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhY3Rpb24gPSAnVVBEQVRFJztcbiAgICAgICAgICAgICAgICBvbGRWYWx1ZSA9IHRhcmdldFtrZXldO1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWx1ZSA9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZSB2YWx1ZSBhcmUgc2FtZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGFjdGlvbkRhdGEgPSB7XG4gICAgICAgICAgICAgICAgJ2FjdGlvbic6IGFjdGlvbixcbiAgICAgICAgICAgICAgICAnYWN0aW9uUm9vdCc6IHRhcmdldCxcbiAgICAgICAgICAgICAgICAna2V5Jzoga2V5LFxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHZhbHVlXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoYWN0aW9uID09ICd1cGRhdGUnKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uRGF0YS5vbGRWYWx1ZSA9IG9sZFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbm90aWZ5KGFjdGlvbkRhdGEpO1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG5vdGlmeShkYXRhKSB7XG4gICAgICAgIHN1YnNjcmliZXJzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICBmbihkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZGF0YSA9IG5ldyBQcm94eShfcHJveHlPYmplY3RQcm9wZXJ0eShkYXRhLCBzdWJzY3JpYmVycyksIF9oYW5kbGVyKTtcblxuICAgIHJldHVybiBpc1Jvb3QgPyBfX3B1YnN1Yl9fKGRhdGEsIHN1YnNjcmliZXJzKSA6IGRhdGE7XG59XG5cblxuLyoqXG4gKiBcbiAqIEhvdyB0byB1c2U/IFxuICogXG4gKiBcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBPYmplY3Qgb3QgaW50cmVzdFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIHZhciB4ID0ge1xuICogIHVzZXJOYW1lOiBcInZpZ25lc2hcIiwgXG4gKiAgcGFzc3dvcmQ6IFwidGVzdGluZ1wiLCBcbiAqICBhZGRyZXNzOiB7XG4gKiAgICB0ZXN0OntcbiAqICAgICAgdGVzdDp7XG4gKiAgICAgICAgdGVzdDpcInRlc3RcIlxuICogICAgICB9XG4gKiAgICB9XG4gKiAgfVxuICogfVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogXG4gKiBcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFByb3hpbmcgb2JqZWN0IG9mIGludHJlc3RcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIHggPSBnbG9iYWwucHJveHIoeClcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogQG1ldGhvZCBzdWJzY3JpYmVcbiAqIEByZXR1cm4gU3RyaW5ne2hhc2hJZH0gXG4gKiBAYWN0aW9uIEl0IHJldHVybnMgdGhlIGhhc2hJZCBvZiB0aGUgXG4gKiBzdWJzY3JpcHRpb24gd2hpY2ggaXMgdXNlZCB0byB1bnN1YnNjcmliZVxuICogXG4gKiB2YXIgdW5zdWJzY3JpYmUgPSB4LnN1YnNjcmliZShmdW5jdGlvbihkYXRhKXtcbiAqICBjb25zb2xlLmxvZyhkYXRhKVxuICogfSk7XG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEBtZXRob2QgdW5zdWJzY3JpYmVcbiAqIEByZXR1cm4gQm9vbGVhbntpc1Vuc3ViYXNjcmliZWR9ICBcbiAqIEBhY3Rpb24gUmVtb3ZlcyB0aGUgaGFuZGxlciBmcm9tIHRoZSBcbiAqIHN1YnNjcmliZXJzIG1hcC5cbiAqIFxuICogdW5zdWJzY3JpYmUoKTtcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFxuICovIiwiLyoqXG4gKiBMZWdhY3kgbWV0aG9kcyBhbmQgcHJpdmF0ZSBtZXRob2RzIGFyZSBwcmVmaXhlZCB3aXRoIF8odW5kZXJzY29yZSkuXG4gKi9cblxuY29uc3QgaXMgPSB0eXBlID0+IHRhcmdldCA9PiBPYmplY3QodGFyZ2V0KSBpbnN0YW5jZW9mIHR5cGU7XG5cbmV4cG9ydCBkZWZhdWx0IGlzO1xuIiwiaW1wb3J0IGlzIGZyb20gJy4vaXMuanMnO1xuXG5jb25zdCBpc0Jvb2xlYW4gPSB0YXJnZXQgPT4gaXMoQm9vbGVhbikodGFyZ2V0KTtcblxuZXhwb3J0IGRlZmF1bHQgaXNCb29sZWFuOyIsInZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5jb25zdCBpc09iamVjdCA9IHRhcmdldCA9PiB0b1N0cmluZy5jYWxsKHRhcmdldCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xuZXhwb3J0IGRlZmF1bHQgaXNPYmplY3Q7IiwiaW1wb3J0IGlzIGZyb20gJy4vaXMuanMnO1xuY29uc3QgaXNTdHJpbmcgPSB0YXJnZXQgPT4gaXMoU3RyaW5nKSh0YXJnZXQpO1xuXG5leHBvcnQgZGVmYXVsdCBpc1N0cmluZzsiLCJ2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5jb25zdCBpc0RhdGUgPSB0YXJnZXQgPT4gdG9TdHJpbmcuY2FsbCh0YXJnZXQpID09PSAnW29iamVjdCBEYXRlXSc7XG5cbmV4cG9ydCBkZWZhdWx0IGlzRGF0ZTsiLCJ2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5jb25zdCBpc05hTiA9IHRhcmdldCA9PiB0b1N0cmluZy5jYWxsKHRhcmdldCkgPT09ICdbb2JqZWN0IE5hTl0nO1xuXG5leHBvcnQgZGVmYXVsdCBpc05hTjsiLCJ2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5jb25zdCBpc051bGwgPSB0YXJnZXQgPT4gdG9TdHJpbmcuY2FsbCh0YXJnZXQpID09PSAnW29iamVjdCBOdWxsXSc7XG5cbmV4cG9ydCBkZWZhdWx0IGlzTnVsbDsiLCJ2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5jb25zdCBpc1Byb21pc2UgPSB0YXJnZXQgPT4gdG9TdHJpbmcuY2FsbCh0YXJnZXQpID09PSAnW29iamVjdCBQcm9taXNlXSc7XG5cbmV4cG9ydCBkZWZhdWx0IGlzUHJvbWlzZTsiLCJ2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5jb25zdCBpc1N5bWJvbCA9IHRhcmdldCA9PiB0b1N0cmluZy5jYWxsKHRhcmdldCkgPT09ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG5leHBvcnQgZGVmYXVsdCBpc1N5bWJvbDsiLCJcbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmNvbnN0IGlzVW5kZWZpbmVkID0gdGFyZ2V0ID0+IHRvU3RyaW5nLmNhbGwodGFyZ2V0KSA9PT0gJ1tvYmplY3QgVW5kZWZpbmVkXSc7XG5cbmV4cG9ydCBkZWZhdWx0IGlzVW5kZWZpbmVkOyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGN1cnJ5Tihmbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChmbi5sZW5ndGggPT0gYXJndW1lbnRzLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmbiguLi5hcmd1bWVudHMpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gZm4uYmluZChudWxsLCAuLi5hcmd1bWVudHMpO1xuICAgIH07XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZmlsbGVyKCl7XG4gICAgcmV0dXJuICdfX0VNUFRZX18nO1xufSIsImltcG9ydCBwaXBlTiBmcm9tICcuL3BpcGVOJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN5bmNQaXBlTigpIHtcbiAgICBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cywgZmFsc2UpO1xuICAgIHJldHVybiBwaXBlTi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufSIsImltcG9ydCBpcyBmcm9tICcuL2lzLmpzJztcblxuY29uc3QgaXNBcnJheSA9IHRhcmdldCA9PiBpcyhBcnJheSkodGFyZ2V0KTtcblxuZXhwb3J0IGRlZmF1bHQgaXNBcnJheTsiLCJpbXBvcnQgaXMgZnJvbSAnLi9pcy5qcyc7XG5cbmNvbnN0IGlzRnVuY3Rpb24gPSB0YXJnZXQgPT4gaXMoRnVuY3Rpb24pKHRhcmdldCk7XG5cbmV4cG9ydCBkZWZhdWx0IGlzRnVuY3Rpb247IiwiaW1wb3J0IGlzIGZyb20gJy4vaXMuanMnO1xuXG5jb25zdCBpc051bWJlciA9IHRhcmdldCA9PiBpcyhOdW1iZXIpKHRhcmdldCk7XG5cbmV4cG9ydCBkZWZhdWx0IGlzTnVtYmVyOyIsImltcG9ydCBpcyBmcm9tICcuL2lzLmpzJztcbmNvbnN0IGlzUmVnZXggPSB0YXJnZXQgPT4gaXMoUmVnRXhwKSh0YXJnZXQpO1xuXG5leHBvcnQgZGVmYXVsdCBpc1JlZ2V4OyJdLCJuYW1lcyI6WyJidWlsZExvZ3MiLCJyZXN0IiwibG9nIiwicmVzdExlbmd0aCIsImxlbmd0aCIsImkiLCJwdXNoIiwicGlwZTIiLCJmbjEiLCJmbjIiLCJjYWxsIiwidGhpcyIsImFwcGx5IiwiYXJndW1lbnRzIiwic3luY1BpcGUyIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ0aGVuIiwiZGF0YSIsImNhdGNoIiwicGlwZU4iLCJpc0FzeW5jIiwiaXNCb29sZWFuIiwicHJvdG90eXBlIiwic2hpZnQiLCJhcmdzIiwibGFzdFJlc3VsdCIsIl9waXBlMiIsInJhbmRvbVRva2VuIiwiaGFzaCIsImxhbmd1YWdlIiwib2Zmc2V0IiwiY2hhckF0IiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiX3Byb3h5T2JqZWN0UHJvcGVydHkiLCJzdWJzY3JpYmVycyIsImtleSIsImlzT2JqZWN0IiwicHJveHIiLCJ1bnN1YnNjcmliZSIsImlkIiwiaGFzIiwiZGVsZXRlIiwiRXJyb3IiLCJfX3B1YnN1Yl9fIiwic3Vic2NyaWJlIiwiZm4iLCJpcyIsIkZ1bmN0aW9uIiwiaGFzaDMyIiwic2V0IiwiYmluZCIsIl9zdWJzY3JpYmVycyIsIm5vdGlmeSIsImZvckVhY2giLCJpc1Jvb3QiLCJNYXAiLCJfaGFuZGxlciIsInRhcmdldCIsInZhbHVlIiwiYWN0aW9uIiwib2xkVmFsdWUiLCJhY3Rpb25EYXRhIiwiaXNTdHJpbmciLCJQcm94eSIsInR5cGUiLCJPYmplY3QiLCJCb29sZWFuIiwidG9TdHJpbmciLCJTdHJpbmciLCJsb2dzIiwic3BsaWNlIiwid2luZG93IiwicGVyZm9ybWFuY2UiLCJub3ciLCJ0b0ZpeGVkIiwiRGF0ZSIsInVuc2hpZnQiLCJBcnJheSIsIk51bWJlciIsIlJlZ0V4cCJdLCJtYXBwaW5ncyI6IndMQUFBLFNBQVNBLEVBQVVDLE9BQ2JDLEtBQ0FDLEVBQWFGLEVBQUtHLFdBQ2xCQyxFQUFJLE9BQ0dGLEVBQUpFLEtBQ0RDLEtBQU1MLEVBQUtJLGVBR1ZILFdDUmVLLEVBQU1DLEVBQUtDLFVBQzFCLGtCQUNFQSxFQUFJQyxLQUFLQyxLQUFNSCxFQUFJSSxNQUFNRCxLQUFNRSxhQ2tCMUMsU0FBd0JDLEVBQVVOLEVBQUtDLFVBQzVCLGtCQUNJLElBQUlNLFFBQVEsQ0FBQ0MsRUFBU0MsT0FDckJMLE1BQU1ELEtBQU1FLFdBQVdLLEtBQ3ZCLFNBQVVDLEtBQ0VWLEVBQUlDLEtBQUtDLEtBQU1RLE1BRTdCQyxNQUFNSCxHQUNEUixLQ2JuQixTQUl3QlksUUFDaEJDLEVBQ0FDLEVBQVVWLFVBQVUsT0FDVkEsVUFBVSxTQUNkVyxVQUFVQyxNQUFNZixLQUFLRyxlQUVqQixNQUVWYSxFQUFPYixVQUNQUixFQUFJLEVBQ0pELEVBQVNTLFVBQVVULE9BQ25CdUIsRUFBYWQsVUFBVSxHQUN2QmUsRUFBU04sRUFBVWYsRUFBUU8sS0FDakIsR0FBVlYsRUFDQSxPQUFPUyxVQUFVLE1BQ1AsR0FBVlQsRUFDQSxPQUFRd0IsRUFBT0YsRUFBSyxHQUFJQSxFQUFLLFNBQ3RCdEIsRUFBUyxFQUFiQyxLQUNVdUIsRUFBT0QsRUFBWUQsRUFBS3JCLEVBQUksZUFJdENzQixXQ3pDYUUsRUFBWXpCLE9BSTNCLElBSEQwQixFQUFPLEdBQ1BDLEVBQVcsbUVBRU5DLEVBQVMsRUFBWTVCLEVBQVQ0QixFQUFpQkEsSUFDbENGLEdBQVFDLEVBQVNFLE9BQU9DLEtBQUtDLE1BQXNCSixHQUFoQkcsS0FBS0Usa0JBRXJDTixFQ0FYLFNBQVNPLEVBQXFCbEIsRUFBTW1CLE9BQzNCLElBQUlDLEtBQU9wQixFQUNU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
